# Copy mode keybindings for vi-style selection
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"

# Remap prefix to Ctrl+a (like GNU screen)
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Show prefix status in status bar
set -g status-left "#{?client_prefix,PREFIX,}"

# Reload tmux configuration without exiting
bind r source-file ~/.tmux.conf ; display-message "Config reloaded ðŸŒ€..."

# FZF window/session switcher
bind C-l run-shell "tmux list-window -a -F \"##S:##I ##W ##P ##D\" | fzf --sync --tmux center | awk '{print \$1}' | xargs tmux switch-client -t"

# Start window numbering at 1 instead of 0
set -g base-index 1

# Start pane numbering at 1 instead of 0
set -g pane-base-index 1

# New panes open in the same directory as the current pane
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Enable mouse support for clicking panes, resizing, and scrolling
set -g mouse on

# Preserve cursor style from terminal (fix for beam cursor)
set -g -a terminal-overrides ',*:Ss=\E[%p1%d q:Se=\E[6 q'
set -ga terminal-overrides '*:Ss=\E[%p1%d q:Se=\E[6 q'

# Set default terminal mode to 256 colors
set -g default-terminal "screen-256color"

# Status bar background and foreground colors
set -g status-style "fg=black,bg=cyan"

# Inactive window title format and colors
set -g window-status-format "#[fg=black,bg=cyan] #I:#W "

# Active window title format and colors
set -g window-status-current-format "#[fg=white,bg=black] #I:#W "

# Left side of status bar (empty)
set -g status-left ""

# Right side of status bar (shows session name)
set -g status-right " #[fg=default,bg=default]#S "

# --- Plugin Manager (TPM) ---
# Plugin list
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Enable automatic session restoration on tmux start
set -g @continuum-restore 'on'

# Auto-save session every 5 minutes
set -g @continuum-save-interval '5'

# Initialize TPM (must be last line)
run '~/.tmux/plugins/tpm/tpm'
